<dx-data-grid
  [dataSource]="dataSource"
  [showBorders]="true"
  [columnAutoWidth]="true"
  [allowColumnReordering]="true"
  [allowColumnResizing]="true"
  [rowAlternationEnabled]="true"
  (onToolbarPreparing)="onToolbarPreparing($event)"
  (onRowUpdating)="onRowUpdating($event)"
  (onRowInserting)="onRowInserting($event)"
  (onRowRemoving)="onRowRemoving($event)">

  <dxo-load-panel [enabled]="true"></dxo-load-panel>
  <dxo-scrolling mode="virtual"></dxo-scrolling>
  <dxo-sorting mode="multiple"></dxo-sorting>
  <dxo-filter-row [visible]="true"></dxo-filter-row>
  <dxo-header-filter [visible]="true"></dxo-header-filter>
  <dxo-search-panel [visible]="true" [width]="240"></dxo-search-panel>
  <dxo-group-panel [visible]="true"></dxo-group-panel>
  <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
  <dxo-selection mode="single"></dxo-selection>
  <dxo-export [enabled]="true"></dxo-export>

  <dxi-column dataField="id" caption="ID" [width]="70" [allowEditing]="false"></dxi-column>
  <dxi-column dataField="timestamp" caption="Timestamp" dataType="datetime"></dxi-column>
  <dxi-column dataField="value" caption="Value" dataType="number"></dxi-column>
  <dxi-column dataField="unit" caption="Unit"></dxi-column>
  <dxi-column dataField="source" caption="Source"></dxi-column>
  <dxi-column dataField="status" caption="Status"></dxi-column>
  <dxi-column dataField="metadata" caption="Metadata" [calculateCellValue]="convertMetadataToArray"></dxi-column>

  <dxo-editing
    mode="popup"
    [allowUpdating]="true"
    [allowDeleting]="true"
    [allowAdding]="true">
  </dxo-editing>

  <dxo-paging [pageSize]="10"></dxo-paging>
  <dxo-pager
    [showPageSizeSelector]="true"
    [allowedPageSizes]="[10, 25, 50, 100]"
    [showInfo]="true">
  </dxo-pager>
</dx-data-grid>

<div *ngIf="loading" class="loading-overlay">
  <mat-spinner></mat-spinner>
</div> 